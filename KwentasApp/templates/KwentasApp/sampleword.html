<!DOCTYPE html>
<html lang="en">
<head>
    {%load static %}
    <meta charset="UTF-8">
    <title>All Projects</title>
<link rel="stylesheet" href="{% static 'KwentasApp/css/sampleword.css'%}" />
    <script>
        function selectProject(entryId) {
        

            // Show the form for the selected entry
            var selectedForm = document.getElementById('form-' + entryId);
            if (selectedForm) {
                selectedForm.classList.remove('hidden');
            }

            document.getElementById('project-list').style.display = "none";
            
        }
    </script>
</head>
<body>
    <h1>Word Download </h1>
    
    <form method="GET" class="search">
        <input type="text" name="search" placeholder="Search" value="{{ search_query }}">
        <button type="submit">Search</button>
    </form>
    
    <div id="project-list" class="project-list">
        {% if all_entries %}
            {% for entry in all_entries %}
            <div class="project-item">
                <button type="button" onclick="selectProject('{{ entry.code }}')">Select</button>
                <div class="project-entry">
                    <h2>Project Code: {{ entry.code }}</h2>
                    <p><strong>Year:</strong> {{ entry.year }}</p>
                    <p><strong>PPA:</strong> {{ entry.ppa }}</p>
                    <p><strong>Implementing Unit:</strong> {{ entry.implementing_unit }}</p>
                    <p><strong>Location:</strong> {{ entry.location }}</p>
                    <p><strong>Appropriation:</strong> {{ entry.appropriation }}</p>
                    <p><strong>Start Date:</strong> {{ entry.start_date }}</p>
                    <p><strong>End Date:</strong> {{ entry.end_date }}</p>
                    <p><strong>Remarks:</strong> {{ entry.remarks }}</p>
                    <p><strong>Remaining Balance:</strong> {{ entry.remaining_balance }}</p>
                    <p><strong>Total Spent:</strong> {{ entry.total_spent }}</p>
                    <p><strong>Added Budget:</strong> {{ entry.added_budget }}</p>
                    <p><strong>Total Budget:</strong> {{ entry.total_budget }}</p>
                    <p><strong>Utilization Rate:</strong> {{ entry.utilization_rate }}</p>
                    <p><strong>Obligation:</strong>
                        <ul>
                            {% for obligation in entry.obligation %}
                            <li>{{ obligation.name }}: {{ obligation.spent }} ({{ obligation.date }})</li>
                            {% endfor %}
                        </ul>
                    </p>
                    <p><strong>Budget Data:</strong>
                        <ul>
                            {% for budget in entry.budget_data %}
                            <li>{{ budget.name }}: {{ budget.added_budget }} ({{ budget.date }})</li>
                            {% endfor %}
                        </ul>
                    </p>
                </div>
            </div>
            {% endfor %}
        {% else %}
            <p>No matching entries found.</p>
        {% endif %}
    </div>
    

  
    {% for entry in all_entries %}
    <div id="form-{{ entry.code }}" class="project-form hidden">
        <form method="GET" action="{% url 'download_word' entry.code %}">
            <button type="submit">Download as Word</button>
       
        
            
            {% csrf_token %}
            <ul>
                <li>
                    <label for="ppa">PPA:</label>
                    <input type="text" id="ppa" name="ppa" value="{{ entry.ppa }}" readonly>
                </li>
                <li>
                    <label for="implementing_unit">Implementing Unit:</label>
                    <input type="text" id="implementing_unit" name="implementing_unit" value="{{ entry.implementing_unit }}" readonly>
                </li>
                <li>
                    <label for="location">Location:</label>
                    <input type="text" id="location" name="location" value="{{ entry.location }}" readonly>
                </li>
                <li>
                    <label for="appropriation">Appropriation:</label>
                    <input type="text" id="appropriation" name="appropriation" value="{{ entry.appropriation }}" readonly>
                </li>
                <li>
                    <label for="start_date">Start Date:</label>
                    <input type="text" id="start_date" name="start_date" value="{{ entry.start_date }}" readonly>
                </li>
                <li>
                    <label for="end_date">End Date:</label>
                    <input type="text" id="end_date" name="end_date" value="{{ entry.end_date }}" readonly>
                </li>
                <li>
                    <label for="remarks">Remarks:</label>
                    <input type="text" id="remarks" name="remarks" value="{{ entry.remarks }}" readonly>
                </li>
                <li>
                    <label for="remaining_balance">Remaining Balance:</label>
                    <input type="text" id="remaining_balance" name="remaining_balance" value="{{ entry.remaining_balance }}" readonly>
                </li>
                <li>
                    <label for="total_spent">Total Spent:</label>
                    <input type="text" id="total_spent" name="total_spent" value="{{ entry.total_spent }}" readonly>
                </li>
                <li>
                    <label for="added_budget">Added Budget:</label>
                    <input type="text" id="added_budget" name="added_budget" value="{{ entry.added_budget }}" readonly>
                </li>
                <li>
                    <label for="total_budget">Total Budget:</label>
                    <input type="text" id="total_budget" name="total_budget" value="{{ entry.total_budget }}" readonly>
                </li>
                <li>
                    <label for="utilization_rate">Utilization Rate:</label>
                    <input type="text" id="utilization_rate" name="utilization_rate" value="{{ entry.utilization_rate }}" readonly>
                </li>
                <!-- Add more fields if necessary -->
            </ul>
            
        </form>
    </div>
    {% endfor %}
</body>
</html>
